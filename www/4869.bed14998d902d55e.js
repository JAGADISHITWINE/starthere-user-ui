"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4869],{4869(ct,x,g){g.d(x,{MyBookingsModule:()=>st});var l=g(2200),m=g(8132),_=g(7343),M=g(467),p=g(9417),t=g(3664),s=g(2615),u=g(6354),C=g(5312),y=g(9330),O=g(3242);let P=(()=>{var i;class r{constructor(o,e){this.http=o,this.crypto=e,this.API=`${C.c.baseUrl}`}getMyBookings(o){return this.http.get(`${this.API}/getMyBookingsById/${o}`).pipe((0,u.T)(e=>{const a=this.crypto.decrypt(e.data);return{...e,data:a}}))}downloadReceipt(o,e){return this.http.get(`${this.API}/bookings/${e}/${o}/receipt`,{responseType:"blob",observe:"response"})}viewBookingDetails(o){return this.http.get(`${this.API}/bookings/${o}/receipt`,{responseType:"blob",observe:"response"})}submitTrekRating(o,e,a){const c=this.crypto.encrypt(a);return this.http.post(`${this.API}/bookings/${e}/${o}/rating`,{encryptedPayload:c}).pipe((0,u.T)(d=>{if(!d?.data)return d;try{const f=this.crypto.decrypt(d.data);return{...d,data:f}}catch{return d}}))}static#t=i=()=>(this.\u0275fac=function(e){return new(e||r)(s.KVO(y.Qq),s.KVO(O.L))},this.\u0275prov=s.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}))}return i(),r})();var F=g(2454),R=g(537),B=g(6280);const w=()=>[1,2,3,4,5];function j(i,r){if(1&i&&(t.j41(0,"div",13)(1,"div",14)(2,"div",15),t.nrm(3,"span",16),t.EFF(4,"Upcoming"),t.k0s(),t.j41(5,"div",17),t.EFF(6),t.k0s()(),t.j41(7,"div",14)(8,"div",15),t.nrm(9,"span",18),t.EFF(10,"Completed"),t.k0s(),t.j41(11,"div",17),t.EFF(12),t.k0s()(),t.j41(13,"div",14)(14,"div",15),t.nrm(15,"span",19),t.EFF(16,"Total Bookings"),t.k0s(),t.j41(17,"div",17),t.EFF(18),t.k0s()(),t.j41(19,"div",14)(20,"div",15),t.nrm(21,"span",20),t.EFF(22,"Total Spent"),t.k0s(),t.j41(23,"div",17),t.EFF(24),t.nI1(25,"number"),t.k0s()()()),2&i){const n=t.XpG();t.R7$(6),t.JRh(n.upcomingTrips),t.R7$(6),t.JRh(n.completedTrips),t.R7$(6),t.JRh(n.totalBookings),t.R7$(6),t.SpI("\u20b9",t.i5U(25,4,n.totalSpent,"1.0-0"))}}function I(i,r){if(1&i&&(t.j41(0,"span",32),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2);t.R7$(),t.JRh(n.upcomingBookings.length)}}function T(i,r){if(1&i&&(t.j41(0,"span",32),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2);t.R7$(),t.JRh(n.pastBookings.length)}}function E(i,r){if(1&i&&(t.j41(0,"span",32),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2);t.R7$(),t.JRh(n.cancelledBookings.length)}}function $(i,r){if(1&i){const n=t.RV6();t.j41(0,"div",33)(1,"p"),t.EFF(2),t.k0s(),t.j41(3,"button",34),t.bIt("click",function(){s.eBV(n);const e=t.XpG(2);return s.Njj(e.loadBookings())}),t.EFF(4,"Retry"),t.k0s()()}if(2&i){const n=t.XpG(2);t.R7$(2),t.JRh(n.errorMessage)}}function G(i,r){if(1&i&&(t.j41(0,"div",67),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit;t.R7$(),t.SpI(" Your rating: ",n.user_rating," / 5 ")}}function D(i,r){if(1&i&&(t.j41(0,"div",51)(1,"div",52),t.EFF(2,"Days Until Trek"),t.k0s(),t.j41(3,"div",68),t.EFF(4),t.k0s()()),2&i){const n=t.XpG().$implicit,o=t.XpG(3);t.R7$(4),t.SpI("",o.getDaysUntilTrek(n.start_date)," days")}}function z(i,r){if(1&i&&(t.j41(0,"div",51)(1,"div",52),t.EFF(2,"Booked On"),t.k0s(),t.j41(3,"div",53),t.EFF(4),t.k0s()()),2&i){const n=t.XpG().$implicit,o=t.XpG(3);t.R7$(4),t.JRh(o.formatDate(n.created_at))}}function S(i,r){if(1&i&&(t.j41(0,"div",56)(1,"div",57),t.EFF(2,"Balance Due"),t.k0s(),t.j41(3,"div",69),t.EFF(4),t.nI1(5,"number"),t.k0s()()),2&i){const n=t.XpG().$implicit;t.R7$(4),t.SpI("\u20b9",t.i5U(5,1,n.balance_due,"1.0-0"))}}function X(i,r){if(1&i&&(t.j41(0,"span",72),t.EFF(1),t.k0s()),2&i){const n=r.$implicit;t.R7$(),t.Lme(" ",n.addon_name," \xd7 ",n.quantity," ")}}function Y(i,r){if(1&i&&(t.j41(0,"div",70),t.DNE(1,X,2,2,"span",71),t.k0s()),2&i){const n=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",n.addons)}}function N(i,r){if(1&i&&(t.j41(0,"div",73)(1,"span",74),t.EFF(2,"\u26a0"),t.k0s(),t.j41(3,"div")(4,"strong"),t.EFF(5,"Cancellation policy:"),t.k0s(),t.EFF(6),t.k0s()()),2&i){const n=t.XpG().$implicit,o=t.XpG(3);t.R7$(6),t.SpI(" ",o.getCancellationFeeMessage(n))}}function V(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",75),t.bIt("click",function(){s.eBV(n);const e=t.XpG().$implicit,a=t.XpG(3);return s.Njj(a.viewBookingDetails(e))}),t.EFF(1," \u{1f441} View Details "),t.k0s()}}function U(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",75),t.bIt("click",function(){s.eBV(n);const e=t.XpG().$implicit,a=t.XpG(3);return s.Njj(a.downloadReceipt(e))}),t.EFF(1," \u2193 Receipt "),t.k0s()}}function L(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",76),t.bIt("click",function(){s.eBV(n);const e=t.XpG().$implicit,a=t.XpG(3);return s.Njj(a.openCancelModal(e))}),t.EFF(1," \u2715 Cancel "),t.k0s()}}function A(i,r){1&i&&(t.j41(0,"button",77),t.EFF(1," \u{1f4b3} Pay Balance "),t.k0s())}function J(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",75),t.bIt("click",function(){s.eBV(n);const e=t.XpG().$implicit,a=t.XpG(3);return s.Njj(a.openRatingModal(e))}),t.EFF(1),t.k0s()}if(2&i){const n=t.XpG().$implicit,o=t.XpG(3);t.R7$(),t.SpI(" \u2b50 ",o.hasUserRated(n)?"Update Rating":"Rate Trek"," ")}}function H(i,r){if(1&i&&(t.j41(0,"div",39)(1,"div",40),t.nrm(2,"img",41),t.j41(3,"div",42)(4,"div",43),t.EFF(5),t.k0s(),t.j41(6,"div",44)(7,"span",45),t.EFF(8),t.nI1(9,"titlecase"),t.k0s(),t.j41(10,"span",45),t.EFF(11),t.nI1(12,"titlecase"),t.k0s()()()(),t.j41(13,"div",46)(14,"div",47),t.EFF(15),t.k0s(),t.j41(16,"div",48),t.EFF(17),t.k0s(),t.DNE(18,G,2,1,"div",49),t.j41(19,"div",50)(20,"div",51)(21,"div",52),t.EFF(22,"Trek Dates"),t.k0s(),t.j41(23,"div",53),t.EFF(24),t.k0s()(),t.j41(25,"div",51)(26,"div",52),t.EFF(27,"Participants"),t.k0s(),t.j41(28,"div",53),t.EFF(29),t.k0s()(),t.DNE(30,D,5,1,"div",54)(31,z,5,1,"ng-template",null,0,t.C5r),t.k0s(),t.j41(33,"div",55)(34,"div",56)(35,"div",57),t.EFF(36,"Total Amount"),t.k0s(),t.j41(37,"div",58),t.EFF(38),t.nI1(39,"number"),t.k0s()(),t.j41(40,"div",56)(41,"div",57),t.EFF(42,"Paid"),t.k0s(),t.j41(43,"div",59),t.EFF(44),t.nI1(45,"number"),t.k0s()(),t.DNE(46,S,6,4,"div",60),t.k0s(),t.DNE(47,Y,2,1,"div",61)(48,N,7,1,"div",62),t.k0s(),t.j41(49,"div",63),t.DNE(50,V,2,0,"button",64)(51,U,2,0,"button",64)(52,L,2,0,"button",65)(53,A,2,0,"button",66)(54,J,2,1,"button",64),t.k0s()()),2&i){const n=r.$implicit,o=t.sdS(32),e=t.XpG(3);t.R7$(2),t.Y8G("src","http://localhost:4001/"+n.cover_image,t.B4B)("alt",n.trek_name),t.R7$(3),t.JRh(n.booking_reference),t.R7$(2),t.Y8G("ngClass",e.getStatusClass(n.booking_status)),t.R7$(),t.SpI(" ",t.bMT(9,25,n.booking_status)," "),t.R7$(2),t.Y8G("ngClass",e.getPaymentStatusClass(n.payment_status)),t.R7$(),t.SpI(" ",t.bMT(12,27,n.payment_status)," "),t.R7$(4),t.JRh(n.trek_name),t.R7$(2),t.SpI("\u{1f4cd} ",n.location),t.R7$(),t.Y8G("ngIf",e.hasUserRated(n)),t.R7$(6),t.Lme("",e.formatDate(n.start_date)," \u2013 ",e.formatDate(n.end_date)),t.R7$(5),t.SpI("",n.participants," people"),t.R7$(),t.Y8G("ngIf","upcoming"===e.activeTab)("ngIfElse",o),t.R7$(8),t.SpI("\u20b9",t.i5U(39,29,n.total_amount,"1.0-0")),t.R7$(6),t.SpI("\u20b9",t.i5U(45,32,n.amount_paid,"1.0-0")),t.R7$(2),t.Y8G("ngIf",n.balance_due>0),t.R7$(),t.Y8G("ngIf",null==n.addons?null:n.addons.length),t.R7$(),t.Y8G("ngIf","upcoming"===e.activeTab&&e.canCancel(n)),t.R7$(2),t.Y8G("ngIf","upcoming"===e.activeTab),t.R7$(),t.Y8G("ngIf","upcoming"===e.activeTab),t.R7$(),t.Y8G("ngIf","upcoming"===e.activeTab&&e.canCancel(n)),t.R7$(),t.Y8G("ngIf",n.balance_due>0&&"upcoming"===e.activeTab),t.R7$(),t.Y8G("ngIf","past"===e.activeTab&&"completed"===n.booking_status)}}function K(i,r){1&i&&(t.j41(0,"p"),t.EFF(1,"Start planning your next adventure!"),t.k0s())}function Q(i,r){1&i&&(t.j41(0,"p"),t.EFF(1,"You haven't completed any treks yet."),t.k0s())}function W(i,r){1&i&&(t.j41(0,"p"),t.EFF(1,"No cancelled bookings."),t.k0s())}function Z(i,r){if(1&i&&(t.j41(0,"div",78)(1,"div",79),t.EFF(2,"?"),t.k0s(),t.j41(3,"h3"),t.EFF(4),t.k0s(),t.DNE(5,K,2,0,"p",31)(6,Q,2,0,"p",31)(7,W,2,0,"p",31),t.j41(8,"a",80),t.EFF(9,"Browse Treks \u2192"),t.k0s()()),2&i){const n=t.XpG(3);t.R7$(4),t.SpI("No ",n.activeTab," bookings"),t.R7$(),t.Y8G("ngIf","upcoming"===n.activeTab),t.R7$(),t.Y8G("ngIf","past"===n.activeTab),t.R7$(),t.Y8G("ngIf","cancelled"===n.activeTab)}}function q(i,r){if(1&i&&(t.qex(0),t.j41(1,"div",35)(2,"h2"),t.EFF(3),t.nI1(4,"titlecase"),t.k0s(),t.j41(5,"span",36),t.EFF(6),t.k0s()(),t.DNE(7,H,55,35,"div",37)(8,Z,10,4,"div",38),t.bVm()),2&i){const n=t.XpG(2);t.R7$(3),t.SpI("",t.bMT(4,4,n.activeTab)," Trips"),t.R7$(3),t.SpI("",n.currentBookings.length," bookings"),t.R7$(),t.Y8G("ngForOf",n.currentBookings),t.R7$(),t.Y8G("ngIf",0===n.currentBookings.length)}}function tt(i,r){if(1&i){const n=t.RV6();t.j41(0,"div",21)(1,"aside",22)(2,"div",23),t.EFF(3,"Filter"),t.k0s(),t.j41(4,"button",24),t.bIt("click",function(){s.eBV(n);const e=t.XpG();return s.Njj(e.switchTab("upcoming"))}),t.j41(5,"div",25)(6,"div",26),t.EFF(7,"\u{1f5d3}"),t.k0s(),t.j41(8,"span",27),t.EFF(9,"Upcoming"),t.k0s()(),t.DNE(10,I,2,1,"span",28),t.k0s(),t.j41(11,"button",24),t.bIt("click",function(){s.eBV(n);const e=t.XpG();return s.Njj(e.switchTab("past"))}),t.j41(12,"div",25)(13,"div",26),t.EFF(14,"\u2705"),t.k0s(),t.j41(15,"span",27),t.EFF(16,"Past"),t.k0s()(),t.DNE(17,T,2,1,"span",28),t.k0s(),t.j41(18,"button",24),t.bIt("click",function(){s.eBV(n);const e=t.XpG();return s.Njj(e.switchTab("cancelled"))}),t.j41(19,"div",25)(20,"div",26),t.EFF(21,"\u2715"),t.k0s(),t.j41(22,"span",27),t.EFF(23,"Cancelled"),t.k0s()(),t.DNE(24,E,2,1,"span",28),t.k0s()(),t.j41(25,"main",29),t.DNE(26,$,5,1,"div",30)(27,q,9,6,"ng-container",31),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(4),t.AVh("active","upcoming"===n.activeTab),t.R7$(6),t.Y8G("ngIf",n.upcomingBookings.length),t.R7$(),t.AVh("active","past"===n.activeTab),t.R7$(6),t.Y8G("ngIf",n.pastBookings.length),t.R7$(),t.AVh("active","cancelled"===n.activeTab),t.R7$(6),t.Y8G("ngIf",n.cancelledBookings.length),t.R7$(2),t.Y8G("ngIf",n.errorMessage),t.R7$(),t.Y8G("ngIf",!n.errorMessage)}}function nt(i,r){1&i&&(t.j41(0,"div",81)(1,"p"),t.EFF(2,"Loading your adventures\u2026"),t.k0s()())}function et(i,r){if(1&i){const n=t.RV6();t.j41(0,"div",82),t.bIt("click",function(){s.eBV(n);const e=t.XpG();return s.Njj(e.closeRatingModal())}),t.k0s()}}function ot(i,r){if(1&i){const n=t.RV6();t.j41(0,"button",93),t.bIt("click",function(){const e=s.eBV(n).$implicit,a=t.XpG(2);return s.Njj(a.setRating(e))}),t.EFF(1," \u2605 "),t.k0s()}if(2&i){const n=r.$implicit,o=t.XpG(2);t.AVh("active",n<=o.selectedRating)}}function it(i,r){if(1&i&&(t.j41(0,"p",94),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2);t.R7$(),t.JRh(n.ratingErrorMessage)}}function at(i,r){if(1&i){const n=t.RV6();t.j41(0,"div",83)(1,"div",84),t.bIt("click",function(e){return s.eBV(n),s.Njj(e.stopPropagation())}),t.j41(2,"h3"),t.EFF(3,"Rate Your Trek"),t.k0s(),t.j41(4,"p",85),t.EFF(5),t.k0s(),t.j41(6,"div",86),t.DNE(7,ot,2,2,"button",87),t.k0s(),t.j41(8,"textarea",88),t.mxI("ngModelChange",function(e){s.eBV(n);const a=t.XpG();return t.DH7(a.selectedReview,e)||(a.selectedReview=e),s.Njj(e)}),t.k0s(),t.DNE(9,it,2,1,"p",89),t.j41(10,"div",90)(11,"button",91),t.bIt("click",function(){s.eBV(n);const e=t.XpG();return s.Njj(e.closeRatingModal())}),t.EFF(12,"Cancel"),t.k0s(),t.j41(13,"button",92),t.bIt("click",function(){s.eBV(n);const e=t.XpG();return s.Njj(e.submitRating())}),t.EFF(14),t.k0s()()()()}if(2&i){const n=t.XpG();t.R7$(5),t.JRh(null==n.selectedBookingForRating?null:n.selectedBookingForRating.trek_name),t.R7$(2),t.Y8G("ngForOf",t.lJ4(6,w)),t.R7$(),t.R50("ngModel",n.selectedReview),t.R7$(),t.Y8G("ngIf",n.ratingErrorMessage),t.R7$(4),t.Y8G("disabled",n.isSubmittingRating),t.R7$(),t.SpI(" ",n.isSubmittingRating?"Submitting...":"Submit Rating"," ")}}let k=(()=>{var i;class r{constructor(o,e,a,c){this.bookingService=o,this.authModal=e,this.router=a,this.tokenService=c,this.activeTab="upcoming",this.upcomingBookings=[],this.pastBookings=[],this.cancelledBookings=[],this.isLoading=!1,this.errorMessage="",this.totalBookings=0,this.totalSpent=0,this.upcomingTrips=0,this.completedTrips=0,this.ratingModalOpen=!1,this.isSubmittingRating=!1,this.ratingErrorMessage="",this.selectedBookingForRating=null,this.selectedRating=0,this.selectedReview=""}ngOnInit(){try{this.userId=this.tokenService.getUserId()}catch{this.userId=null}this.loadBookings()}loadBookings(){this.isLoading=!0,this.errorMessage="",this.bookingService.getMyBookings(this.userId).subscribe(o=>{1==o.success&&(this.categorizeBookings(o.data.bookings),this.calculateStats(o.data.bookings)),this.isLoading=!1})}categorizeBookings(o){const e=new Date;e.setHours(0,0,0,0),this.upcomingBookings=o.filter(a=>{const c=new Date(a.start_date);return"cancelled"!==a.booking_status&&"completed"!==a.booking_status&&c>=e}),this.pastBookings=o.filter(a=>{const c=new Date(a.start_date);return"completed"===a.booking_status||"cancelled"!==a.booking_status&&c<e}),this.cancelledBookings=o.filter(a=>"cancelled"===a.booking_status),this.upcomingBookings.sort((a,c)=>new Date(a.start_date).getTime()-new Date(c.start_date).getTime()),this.pastBookings.sort((a,c)=>new Date(c.start_date).getTime()-new Date(a.start_date).getTime())}calculateStats(o){this.totalBookings=o.filter(e=>"cancelled"!==e.booking_status).length,this.totalSpent=o.filter(e=>"cancelled"!==e.booking_status).reduce((e,a)=>e+parseFloat(a.total_amount.toString()),0),this.upcomingTrips=this.upcomingBookings.length,this.completedTrips=o.filter(e=>"completed"===e.booking_status).length}get currentBookings(){switch(this.activeTab){case"upcoming":return this.upcomingBookings;case"past":return this.pastBookings;case"cancelled":return this.cancelledBookings;default:return[]}}switchTab(o){this.activeTab=o}viewBookingDetails(o){this.router.navigate(["/tour-details",o.trek_id])}downloadReceipt(o){const e=o.id;this.booking_reference=o.booking_reference,this.bookingService.downloadReceipt(e,this.userId).subscribe({next:a=>{const c=new Blob([a.body],{type:"application/pdf"}),d=window.URL.createObjectURL(c),f=document.createElement("a");f.href=d;const h=a.headers.get("Content-Disposition");let v=`Receipt_${this.booking_reference}.pdf`;if(h){const b=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(h);null!=b&&b[1]&&(v=b[1].replace(/['"]/g,""))}f.download=v,f.click(),window.URL.revokeObjectURL(d)},error:a=>{console.error("Download failed:",a)}})}getStatusClass(o){switch(o){case"confirmed":return"badge-success";case"pending":return"badge-warning";case"cancelled":return"badge-danger";default:return"badge-secondary"}}getPaymentStatusClass(o){switch(o){case"paid":return"badge-success";case"partial":return"badge-info";case"pending":return"badge-warning";default:return"badge-secondary"}}formatDate(o){return new Date(o).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}getDaysUntilTrek(o){const e=new Date,c=new Date(o).getTime()-e.getTime();return Math.ceil(c/864e5)}canCancel(o){const e=this.getDaysUntilTrek(o.start_date);return("pending"===o.booking_status||"confirmed"===o.booking_status)&&e>=7}getCancellationFeeMessage(o){const e=this.getDaysUntilTrek(o.start_date);return e>=30?"100% refund (No cancellation fee)":e>=15?"75% refund (25% cancellation fee)":e>=7?"50% refund (50% cancellation fee)":"No refund (Cannot cancel within 7 days)"}openCancelModal(o){var e=this;return(0,M.A)(function*(){const a={...o,userId:e.userId};try{(yield e.authModal.openCancle(a))?.cancelled&&e.loadBookings()}catch{}})()}hasUserRated(o){const e=Number(o.user_rating||0);return e>=1&&e<=5}openRatingModal(o){this.selectedBookingForRating=o,this.selectedRating=Number(o.user_rating||0),this.selectedReview=o.user_review||"",this.ratingErrorMessage="",this.ratingModalOpen=!0}closeRatingModal(){this.isSubmittingRating||(this.ratingModalOpen=!1,this.selectedBookingForRating=null,this.selectedRating=0,this.selectedReview="",this.ratingErrorMessage="")}setRating(o){this.selectedRating=o}submitRating(){if(!this.selectedBookingForRating)return;if(this.selectedRating<1||this.selectedRating>5)return void(this.ratingErrorMessage="Please select a star rating.");this.isSubmittingRating=!0,this.ratingErrorMessage="";const o={rating:this.selectedRating,review:this.selectedReview?.trim()||""};this.bookingService.submitTrekRating(this.selectedBookingForRating.id,this.userId,o).subscribe({next:()=>{this.selectedBookingForRating&&(this.selectedBookingForRating.user_rating=this.selectedRating,this.selectedBookingForRating.user_review=o.review,this.selectedBookingForRating.rated_at=(new Date).toISOString(),this.isSubmittingRating=!1,this.closeRatingModal())},error:()=>{this.isSubmittingRating=!1,this.ratingErrorMessage="Could not submit rating. Please try again."}})}static#t=i=()=>(this.\u0275fac=function(e){return new(e||r)(t.rXU(P),t.rXU(F.H),t.rXU(R.Ix),t.rXU(B.B))},this.\u0275cmp=t.VBU({type:r,selectors:[["app-my-bookings"]],decls:16,vars:5,consts:[["bookedOn",""],[1,"page"],[1,"nav"],["routerLink","",1,"nav-back"],[1,"nav-title"],[1,"hero-header"],[1,"hero-greeting"],[1,"hero-title"],["class","stats-strip",4,"ngIf"],["class","body-wrap",4,"ngIf"],["class","error-state","style","min-height:80vh",4,"ngIf"],["class","rating-backdrop",3,"click",4,"ngIf"],["class","rating-modal","role","dialog","aria-modal","true",4,"ngIf"],[1,"stats-strip"],[1,"stat-cell"],[1,"stat-tag"],[1,"stat-dot","dot-blue"],[1,"stat-val"],[1,"stat-dot","dot-emerald"],[1,"stat-dot","dot-violet"],[1,"stat-dot","dot-amber"],[1,"body-wrap"],[1,"sidebar"],[1,"sidebar-label"],[1,"tab-item",3,"click"],[1,"tab-left"],[1,"tab-icon"],[1,"tab-name"],["class","tab-count",4,"ngIf"],[1,"main-content"],["class","error-state",4,"ngIf"],[4,"ngIf"],[1,"tab-count"],[1,"error-state"],[1,"retry-btn",3,"click"],[1,"section-head"],[1,"count"],["class","booking-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"booking-card"],[1,"card-image-strip"],["onerror","this.src='assets/default-trek.jpg'",3,"src","alt"],[1,"image-overlay"],[1,"booking-ref"],[1,"badge-stack"],[1,"status-badge",3,"ngClass"],[1,"card-body"],[1,"trek-name"],[1,"trek-location"],["class","user-rating-chip",4,"ngIf"],[1,"info-grid"],[1,"info-cell"],[1,"info-label"],[1,"info-val"],["class","info-cell",4,"ngIf","ngIfElse"],[1,"payment-strip"],[1,"pay-cell"],[1,"pay-label"],[1,"pay-amount"],[1,"pay-amount","positive"],["class","pay-cell",4,"ngIf"],["class","addons-row",4,"ngIf"],["class","warn-bar",4,"ngIf"],[1,"card-actions"],["class","action-btn",3,"click",4,"ngIf"],["class","action-btn danger",3,"click",4,"ngIf"],["class","action-btn primary pay-btn",4,"ngIf"],[1,"user-rating-chip"],[1,"countdown-val"],[1,"pay-amount","danger"],[1,"addons-row"],["class","addon-chip",4,"ngFor","ngForOf"],[1,"addon-chip"],[1,"warn-bar"],[1,"warn-icon"],[1,"action-btn",3,"click"],[1,"action-btn","danger",3,"click"],[1,"action-btn","primary","pay-btn"],[1,"empty-state"],[1,"empty-glyph"],["routerLink","/upcomingtours",1,"browse-btn"],[1,"error-state",2,"min-height","80vh"],[1,"rating-backdrop",3,"click"],["role","dialog","aria-modal","true",1,"rating-modal"],[1,"rating-card",3,"click"],[1,"rating-subtitle"],[1,"stars-row"],["type","button","class","star-btn",3,"active","click",4,"ngFor","ngForOf"],["rows","4","maxlength","500","placeholder","Share your experience (optional)",1,"review-input",3,"ngModelChange","ngModel"],["class","rating-error",4,"ngIf"],[1,"rating-actions"],["type","button",1,"action-btn",3,"click"],["type","button",1,"action-btn","primary",3,"click","disabled"],["type","button",1,"star-btn",3,"click"],[1,"rating-error"]],template:function(e,a){1&e&&(t.j41(0,"div",1)(1,"nav",2)(2,"a",3),t.EFF(3,"\u2190 Back"),t.k0s(),t.j41(4,"div",4),t.EFF(5,"My Bookings"),t.k0s()(),t.j41(6,"div",5)(7,"div",6),t.EFF(8,"Welcome back"),t.k0s(),t.j41(9,"h1",7),t.EFF(10,"Your Adventures"),t.k0s(),t.DNE(11,j,26,7,"div",8),t.k0s(),t.DNE(12,tt,28,11,"div",9)(13,nt,3,0,"div",10)(14,et,1,0,"div",11)(15,at,15,7,"div",12),t.k0s()),2&e&&(t.R7$(11),t.Y8G("ngIf",!a.isLoading),t.R7$(),t.Y8G("ngIf",!a.isLoading),t.R7$(),t.Y8G("ngIf",a.isLoading),t.R7$(),t.Y8G("ngIf",a.ratingModalOpen),t.R7$(),t.Y8G("ngIf",a.ratingModalOpen))},dependencies:[l.MD,l.YU,l.Sq,l.bT,_.bv,_.oY,m.Wk,p.YN,p.me,p.BC,p.tU,p.vS,l.QX,l.PV],styles:['*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{background:#2d4a22;color:#f0f4ff;font-family:Cabinet Grotesk,system-ui,sans-serif;-webkit-font-smoothing:antialiased}.page[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pageIn .6s cubic-bezier(.23,1,.32,1) both}@keyframes _ngcontent-%COMP%_pageIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.nav[_ngcontent-%COMP%]{background:#487737;border-bottom:1px solid rgba(255,255,255,.6);padding:0 5vw;height:60px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100}.nav-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#ffffffc4;border:1px solid rgba(255,255,255,.6);color:#6b7a99;font-family:Cabinet Grotesk,system-ui,sans-serif;font-size:.72rem;font-weight:600;letter-spacing:.08em;text-transform:uppercase;padding:7px 14px;border-radius:6px;cursor:pointer;transition:all .2s;text-decoration:none}.nav-back[_ngcontent-%COMP%]:hover{border-color:#ffffff1f;color:#f0f4ff}.nav-title[_ngcontent-%COMP%]{font-family:"Instrument Serif",Georgia,serif;font-size:1.15rem;font-style:italic;color:#f0f4ff}.nav-avatar[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;background:linear-gradient(135deg,#10c97a,#4d8ef8);display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:800;color:#fff}.hero-header[_ngcontent-%COMP%]{background:#152e27;padding:40px 5vw 0;border-bottom:1px solid rgba(255,255,255,.6)}.hero-greeting[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;letter-spacing:.18em;text-transform:uppercase;color:#6b7a99;margin-bottom:6px}.hero-title[_ngcontent-%COMP%]{font-family:"Instrument Serif",Georgia,serif;font-size:clamp(2rem,4vw,3rem);font-style:italic;color:#f0f4ff;letter-spacing:-.01em;margin-bottom:36px}.stats-strip[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);border-top:1px solid rgba(255,255,255,.6)}.stat-cell[_ngcontent-%COMP%]{padding:24px 0 20px;border-right:1px solid rgba(255,255,255,.6);transition:background .2s}.stat-cell[_ngcontent-%COMP%]:last-child{border-right:none}.stat-cell[_ngcontent-%COMP%]:first-child{padding-left:0}.stat-cell[_ngcontent-%COMP%]:not(:first-child){padding-left:32px}.stat-cell[_ngcontent-%COMP%]:hover{background:#ffffff05}.stat-tag[_ngcontent-%COMP%]{font-size:.64rem;font-weight:600;letter-spacing:.16em;text-transform:uppercase;color:#6b7a99;margin-bottom:8px;display:flex;align-items:center;gap:6px}.stat-dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;flex-shrink:0}.dot-blue[_ngcontent-%COMP%]{background:#4d8ef8}.dot-emerald[_ngcontent-%COMP%]{background:#10c97a}.dot-violet[_ngcontent-%COMP%]{background:#9b6df8}.dot-amber[_ngcontent-%COMP%]{background:#f5a623}.stat-val[_ngcontent-%COMP%]{font-size:clamp(1.6rem,3vw,2.4rem);font-weight:800;color:#fff;line-height:1;letter-spacing:-.02em}.body-wrap[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;min-height:calc(100vh - 60px)}.sidebar[_ngcontent-%COMP%]{background:#0a1e02;border-right:1px solid rgba(255,255,255,.6);padding:32px 0;position:sticky;top:60px;height:calc(100vh - 60px);overflow-y:auto;scrollbar-width:none}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.sidebar-label[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;letter-spacing:.2em;text-transform:uppercase;color:#fff;padding:0 24px 14px}.tab-item[_ngcontent-%COMP%]{width:100%;background:none;border:none;border-left:2px solid transparent;padding:14px 24px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:background .2s;text-align:left}.tab-item[_ngcontent-%COMP%]:hover{background:#ffffff08}.tab-item.active[_ngcontent-%COMP%]{background:#10c97a0f;border-left-color:#10c97a}.tab-item.active[_ngcontent-%COMP%]   .tab-name[_ngcontent-%COMP%]{color:#10c97a}.tab-item.active[_ngcontent-%COMP%]   .tab-count[_ngcontent-%COMP%]{background:#10c97a26;color:#10c97a}.tab-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.tab-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.85rem;background:#ffffff0a}.tab-name[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#e0e2e7;transition:color .2s}.tab-count[_ngcontent-%COMP%]{font-size:.68rem;font-weight:700;background:#ffffff12;color:#e0e2e7;padding:3px 8px;border-radius:20px}.main-content[_ngcontent-%COMP%]{padding:32px 5vw 80px;min-width:0}.section-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}.section-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#000}.section-head[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:.75rem;color:#282d38}.booking-card[_ngcontent-%COMP%]{background:#10181c;border:1px solid rgba(255,255,255,.6);border-radius:12px;overflow:hidden;margin-bottom:16px;transition:border-color .3s cubic-bezier(.23,1,.32,1),box-shadow .3s cubic-bezier(.23,1,.32,1);animation:_ngcontent-%COMP%_cardIn .5s cubic-bezier(.23,1,.32,1) both}.booking-card[_ngcontent-%COMP%]:hover{border-color:#ffffff1f;box-shadow:0 12px 40px #00000059}.booking-card[_ngcontent-%COMP%]:hover   .card-image-strip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.04)}@keyframes _ngcontent-%COMP%_cardIn{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}.card-image-strip[_ngcontent-%COMP%]{position:relative;height:180px;overflow:hidden}.card-image-strip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block;transition:transform .5s cubic-bezier(.23,1,.32,1);filter:brightness(.85) saturate(.9)}.card-image-strip[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(to top,rgba(27,35,51,.98) 0%,rgba(27,35,51,.3) 55%,transparent 100%)}.image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1;padding:16px 20px;display:flex;justify-content:space-between;align-items:flex-end}.booking-ref[_ngcontent-%COMP%]{font-size:.68rem;font-weight:700;letter-spacing:.14em;text-transform:uppercase;color:#f0f4ff80}.badge-stack[_ngcontent-%COMP%]{display:flex;gap:6px;flex-direction:column;align-items:flex-end}.status-badge[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;padding:4px 10px;border-radius:4px}.badge-confirmed[_ngcontent-%COMP%]{background:#10c97a26;color:#10c97a;border:1px solid rgba(16,201,122,.3)}.badge-completed[_ngcontent-%COMP%]{background:#4d8ef81f;color:#4d8ef8;border:1px solid rgba(77,142,248,.25)}.badge-cancelled[_ngcontent-%COMP%]{background:#f054541f;color:#f05454;border:1px solid rgba(240,84,84,.25)}.badge-pending[_ngcontent-%COMP%]{background:#f5a6231f;color:#f5a623;border:1px solid rgba(245,166,35,.25)}.badge-paid[_ngcontent-%COMP%]{background:#10c97a1a;color:#10c97a;border:1px solid rgba(16,201,122,.2)}.badge-partial[_ngcontent-%COMP%]{background:#f5a6231a;color:#f5a623;border:1px solid rgba(245,166,35,.2)}.card-body[_ngcontent-%COMP%]{padding:20px 20px 0}.trek-name[_ngcontent-%COMP%]{font-family:"Instrument Serif",Georgia,serif;font-size:1.3rem;font-style:italic;color:#fff;letter-spacing:-.01em;margin-bottom:4px}.trek-location[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7a99;margin-bottom:20px}.user-rating-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-bottom:14px;padding:5px 10px;border-radius:20px;border:1px solid rgba(245,166,35,.25);background:#f5a6231a;color:#f5a623;font-size:.68rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:0;border:1px solid rgba(255,255,255,.6);border-radius:8px;overflow:hidden;margin-bottom:16px}.info-cell[_ngcontent-%COMP%]{padding:12px 14px;border-right:1px solid rgba(255,255,255,.6)}.info-cell[_ngcontent-%COMP%]:last-child{border-right:none}.info-label[_ngcontent-%COMP%]{font-size:.6rem;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:#3d4d66;margin-bottom:5px}.info-val[_ngcontent-%COMP%]{font-size:.82rem;font-weight:600;color:#f0f4ff;line-height:1.3}.countdown-val[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;color:#10c97a}.payment-strip[_ngcontent-%COMP%]{display:flex;border:1px solid rgba(255,255,255,.6);border-radius:8px;overflow:hidden;margin-bottom:16px}.pay-cell[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border-right:1px solid rgba(255,255,255,.6)}.pay-cell[_ngcontent-%COMP%]:last-child{border-right:none}.pay-label[_ngcontent-%COMP%]{font-size:.6rem;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:#3d4d66;margin-bottom:4px}.pay-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;color:#fff;letter-spacing:-.02em}.pay-amount.positive[_ngcontent-%COMP%]{color:#10c97a}.pay-amount.danger[_ngcontent-%COMP%]{color:#f05454}.addons-row[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}.addon-chip[_ngcontent-%COMP%]{background:#ffffff0a;border:1px solid rgba(255,255,255,.6);color:#6b7a99;font-size:.7rem;font-weight:500;padding:4px 10px;border-radius:20px}.warn-bar[_ngcontent-%COMP%]{background:#f5a62312;border:1px solid rgba(245,166,35,.18);border-radius:8px;padding:12px 14px;margin-bottom:16px;display:flex;gap:10px;align-items:flex-start;font-size:.78rem;color:#f5a623d9;line-height:1.5}.warn-icon[_ngcontent-%COMP%]{font-size:.85rem;margin-top:1px;flex-shrink:0}.card-actions[_ngcontent-%COMP%]{padding:14px 20px;border-top:1px solid rgba(255,255,255,.6);display:flex;gap:8px;flex-wrap:wrap;align-items:center}.action-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-family:Cabinet Grotesk,system-ui,sans-serif;font-size:.7rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;padding:8px 16px;border-radius:6px;border:1px solid rgba(255,255,255,.6);cursor:pointer;transition:all .18s cubic-bezier(.23,1,.32,1);background:transparent;color:#6b7a99;text-decoration:none}.action-btn[_ngcontent-%COMP%]:hover{border-color:#ffffff1f;color:#f0f4ff;background:#ffffff0a}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.action-btn.primary[_ngcontent-%COMP%]{background:#10c97a;border-color:#10c97a;color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{background:#0ba362}.action-btn.danger[_ngcontent-%COMP%]{border-color:#f054544d;color:#f05454}.action-btn.danger[_ngcontent-%COMP%]:hover{background:#f0545414}.pay-btn[_ngcontent-%COMP%]{margin-left:auto}.rating-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0000008c;z-index:1000}.rating-modal[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1001;display:flex;align-items:center;justify-content:center;padding:16px}.rating-card[_ngcontent-%COMP%]{width:100%;max-width:520px;background:#10181c;border:1px solid rgba(255,255,255,.6);border-radius:12px;padding:20px}.rating-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;color:#f0f4ff;font-size:1.2rem}.rating-subtitle[_ngcontent-%COMP%]{margin:0 0 14px;color:#6b7a99;font-size:.85rem}.stars-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:14px}.star-btn[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:8px;border:1px solid rgba(255,255,255,.6);background:transparent;color:#6b7a99;font-size:1.25rem;cursor:pointer;transition:all .18s ease}.star-btn[_ngcontent-%COMP%]:hover, .star-btn.active[_ngcontent-%COMP%]{color:#f5a623;border-color:#f5a62373;background:#f5a62314}.review-input[_ngcontent-%COMP%]{width:100%;border-radius:8px;border:1px solid rgba(255,255,255,.6);background:#0b1215;color:#f0f4ff;font-size:.86rem;padding:10px 12px;resize:vertical;min-height:96px}.rating-error[_ngcontent-%COMP%]{margin:10px 0 0;color:#f05454;font-size:.78rem}.rating-actions[_ngcontent-%COMP%]{margin-top:14px;display:flex;justify-content:flex-end;gap:8px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:40vh;text-align:center;padding:40px}.empty-glyph[_ngcontent-%COMP%]{font-family:"Instrument Serif",Georgia,serif;font-size:5rem;font-style:italic;color:#ffffff0a;line-height:1;margin-bottom:24px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#f0f4ff;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7a99;margin-bottom:24px}.browse-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;background:#10c97a;color:#fff;font-family:Cabinet Grotesk,system-ui,sans-serif;font-size:.72rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;padding:12px 24px;border-radius:6px;border:none;cursor:pointer;text-decoration:none;transition:background .2s}.browse-btn[_ngcontent-%COMP%]:hover{background:#0ba362}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;text-align:center;gap:16px}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7a99;font-size:.85rem}.retry-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(240,84,84,.3);color:#f05454;font-family:Cabinet Grotesk,system-ui,sans-serif;font-size:.7rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;padding:9px 20px;border-radius:6px;cursor:pointer;transition:background .2s}.retry-btn[_ngcontent-%COMP%]:hover{background:#f0545414}@media (max-width: 900px){.body-wrap[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar[_ngcontent-%COMP%]{position:static;height:auto;padding:0;border-right:none;border-bottom:1px solid rgba(255,255,255,.6);display:flex;overflow-x:auto;padding:0 5vw}.sidebar-label[_ngcontent-%COMP%]{display:none}.tab-item[_ngcontent-%COMP%]{display:inline-flex;width:auto;border-left:none;border-bottom:2px solid transparent;padding:14px 18px;flex-shrink:0}.tab-item.active[_ngcontent-%COMP%]{border-left-color:transparent;border-bottom-color:#10c97a}.stats-strip[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.stat-cell[_ngcontent-%COMP%]:nth-child(2){border-right:none}.stat-cell[_ngcontent-%COMP%]:nth-child(3){border-top:1px solid rgba(255,255,255,.6)}.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 500px){.nav[_ngcontent-%COMP%]{height:auto;padding:8px 4vw;gap:10px}.nav-title[_ngcontent-%COMP%]{display:none}.hero-header[_ngcontent-%COMP%]{padding:28px 4vw 0}.hero-title[_ngcontent-%COMP%]{margin-bottom:24px}.stat-cell[_ngcontent-%COMP%]{padding:18px 0 16px}.stat-cell[_ngcontent-%COMP%]:not(:first-child){padding-left:20px}.main-content[_ngcontent-%COMP%]{padding:24px 4vw 64px}.card-image-strip[_ngcontent-%COMP%]{height:160px}.image-overlay[_ngcontent-%COMP%]{padding:12px 14px}.badge-stack[_ngcontent-%COMP%]{gap:4px}.card-body[_ngcontent-%COMP%]{padding:16px 14px 0}.trek-name[_ngcontent-%COMP%]{font-size:1.1rem}.card-actions[_ngcontent-%COMP%]{padding:12px 14px}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.payment-strip[_ngcontent-%COMP%]{flex-direction:column}.pay-cell[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid rgba(255,255,255,.6)}.pay-cell[_ngcontent-%COMP%]:last-child{border-bottom:none}.card-actions[_ngcontent-%COMP%]{flex-direction:column}.card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.card-actions[_ngcontent-%COMP%]   .pay-btn[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 360px){.nav-back[_ngcontent-%COMP%]{padding:6px 10px;font-size:.65rem}.nav-avatar[_ngcontent-%COMP%]{width:30px;height:30px}.stat-val[_ngcontent-%COMP%]{font-size:1.4rem}.action-btn[_ngcontent-%COMP%]{font-size:.65rem}}']}))}return i(),r})();const rt=[{path:"",component:k}];let st=(()=>{var i;class r{static#t=i=()=>(this.\u0275fac=function(e){return new(e||r)},this.\u0275mod=t.$C({type:r}),this.\u0275inj=s.G2t({imports:[l.MD,_.bv,k,m.iI.forChild(rt)]}))}return i(),r})()}}]);