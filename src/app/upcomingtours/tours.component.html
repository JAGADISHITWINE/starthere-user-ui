<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     index.html <head>:
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Syne:wght@500;600;700;800&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<div class="page-enter">

  <!-- HERO -->
  <section class="hero">
    <img class="hero-img"
      src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1400&q=80"
      alt="Treks Banner"
    />
    <div class="hero-body">
      <div class="hero-breadcrumb">
        <a routerLink="">ğŸ  Home</a>
        <span class="sep">â€º</span>
        <span class="current">Upcoming Treks &amp; Adventures</span>
      </div>
      <h1 class="hero-title">Upcoming Treks<br />&amp; Adventures</h1>
      <p class="hero-sub">Karnataka Â· Western Ghats Â· Expert-guided expeditions</p>
    </div>
  </section>

  <!-- CONTROL BAR -->
  <div class="control-bar">
    <div class="control-left">
      <span class="trek-count-label" *ngIf="!isLoading">
        Showing <strong>{{ trekCount }}</strong> of
        <strong>{{ allTreks.length }}</strong> trips
      </span>
      <span class="trek-count-label" *ngIf="isLoading">Loading treksâ€¦</span>
      <div class="divider-v"></div>
      <span class="control-month">{{ selectedMonth }} {{ selectedYear }}</span>
    </div>
    <div class="control-right">
      <span class="sort-label">Sort</span>
      <select class="sort-select" [(ngModel)]="sortBy" (change)="sortTreks()" [disabled]="isLoading">
        <option *ngFor="let opt of sortOptions" [value]="opt.value">{{ opt.label }}</option>
      </select>
    </div>
  </div>

  <!-- ERROR -->
  <div class="error-alert" *ngIf="errorMessage">
    <div class="alert-inner">
      âš  {{ errorMessage }}
      <button class="retry-btn" (click)="loadTreks()">Retry</button>
    </div>
  </div>

  <!-- YEAR NAV -->
  <div class="year-nav">
    <button class="year-btn" *ngIf="previousYear" (click)="changeYear('prev')" [disabled]="isLoading">â† {{ previousYear }}</button>
    <div class="year-current">{{ selectedYear }}</div>
    <button class="year-btn" *ngIf="nextYear" (click)="changeYear('next')" [disabled]="isLoading">{{ nextYear }} â†’</button>
  </div>

  <div class="year-dropdown-wrap" *ngIf="years.length > 4">
    <select class="sort-select" [(ngModel)]="selectedYear" (change)="loadTreks()" [disabled]="isLoading">
      <option *ngFor="let y of years" [value]="y">{{ y }}</option>
    </select>
  </div>

  <!-- MONTH TABS -->
  <div class="month-tabs">
    <button
      class="month-tab"
      *ngFor="let month of months"
      [class.active]="selectedMonth === month"
      (click)="selectMonth(month)"
      [disabled]="isLoading"
    >
      {{ month }}
      <span class="month-count" *ngIf="getMonthCount(month) > 0">{{ getMonthCount(month) }}</span>
    </button>
  </div>

  <!-- LOADER -->
  <div class="loader-wrapper" *ngIf="isLoading">
    <div class="loader-bars">
      <div class="loader-bar"></div>
      <div class="loader-bar"></div>
      <div class="loader-bar"></div>
      <div class="loader-bar"></div>
      <div class="loader-bar"></div>
    </div>
    <p class="loader-text">Loading Expeditions</p>
  </div>

  <!-- TREK LIST -->
  <div class="content" *ngIf="!isLoading">

    <div class="month-header">
      <h2 class="month-heading"><span>{{ selectedMonth }}</span> {{ selectedYear }}</h2>
      <span class="month-sub">{{ trekCount }} departure{{ trekCount !== 1 ? 's' : '' }}</span>
    </div>

    <div class="table-header">
      <div>Date &amp; Duration</div>
      <div>Trek Details</div>
      <div>Availability</div>
      <div style="text-align:right">Price</div>
    </div>

    <div
      class="trek-row"
      *ngFor="let trek of currentMonthTreks"
      [class.sold-out]="trek.status === 'sold-out'"
      (click)="viewDetails(trek.batch_id)"
    >
      <div class="col-date">
        <div class="date-main">{{ trek.date }}</div>
        <div class="date-time">{{ trek.time }}</div>
        <div class="duration-tag">â± {{ trek.duration }}</div>
      </div>

      <div class="col-trek">
        <div class="trek-thumb">
          <img [src]="'http://localhost:4001/' + trek.image" [alt]="trek.name" onerror="this.src='assets/default-trek.jpg'" />
        </div>
        <div class="trek-info-text">
          <h3>{{ trek.name }}</h3>
          <div class="trek-location">ğŸ“ {{ trek.location }}</div>
          <span class="category-tag">{{ trek.category }}</span>
        </div>
      </div>

      <div class="col-status">
        <span class="status-badge"
          [ngClass]="{
            'status-available': trek.status === 'available',
            'status-fast':      trek.status === 'selling-fast',
            'status-last':      trek.status === 'last-seat',
            'status-soldout':   trek.status === 'sold-out'
          }"
        >{{ getStatusText(trek.status) }}</span>
      </div>

      <div class="col-price">
        <div>
          <div class="price-amount">â‚¹{{ trek.price | number:'1.0-0' }}</div>
          <div class="price-per">Per Person</div>
        </div>
        <button
          class="view-btn"
          [class.available]="trek.status !== 'sold-out'"
          [class.soldout]="trek.status === 'sold-out'"
          [disabled]="trek.status === 'sold-out'"
          (click)="$event.stopPropagation(); viewDetails(trek.batch_id)"
        >
          {{ trek.status === 'sold-out' ? 'Sold Out' : 'View' }}
          <span class="btn-arrow" *ngIf="trek.status !== 'sold-out'">â†’</span>
        </button>
      </div>
    </div>

    <div class="empty-state" *ngIf="trekCount === 0">
      <div class="empty-icon">ğŸ”</div>
      <h3>No treks in {{ selectedMonth }} {{ selectedYear }}</h3>
      <p>Try a different month or year.</p>
    </div>

  </div>

  <!-- BOTTOM CTA -->
  <div class="bottom-cta">
    <div class="cta-card">
      <div>
        <div class="cta-eyebrow">Custom Expeditions</div>
        <h2 class="cta-heading">Can't find what you're looking for?</h2>
        <p class="cta-body">We organise tailored group treks, corporate outings, and private expeditions. Tell us where you want to go.</p>
      </div>
      <a routerLink="/contact" class="cta-btn">Get in Touch <span>â†’</span></a>
    </div>
  </div>

</div>