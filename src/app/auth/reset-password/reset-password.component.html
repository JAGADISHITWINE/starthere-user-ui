<div class="reset-wrapper">
  <div class="auth-card">

    <div class="logo-section">
      <h2>Reset Password</h2>
      <p>Enter your new password below</p>
    </div>

    <!-- Validating token spinner -->
    <div *ngIf="tokenValidating" class="text-center py-4">
      <p>Validating your reset link...</p>
    </div>

    <!-- Invalid / expired token -->
    <div *ngIf="!tokenValidating && tokenInvalid" class="text-center">
      <div class="alert alert-danger">
        This reset link is <strong>invalid or has expired</strong>.
      </div>
      <button class="btn primary mt-3" (click)="reloadPage()">
        Request a new link
      </button>
    </div>

    <!-- Reset form -->
    <ng-container *ngIf="!tokenValidating && !tokenInvalid">

      <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
      <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>

      <form [formGroup]="resetForm" (ngSubmit)="submit()" *ngIf="!successMessage">

        <div class="form-group password-group">
          <label>New Password</label>
          <input
            [type]="showPassword ? 'text' : 'password'"
            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
            formControlName="password"
          />
          <button type="button" class="toggle-password" (click)="showPassword = !showPassword">
            {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
          <small *ngIf="resetForm.get('password')?.invalid && resetForm.get('password')?.touched" class="text-danger">
            Password must be at least 6 characters
          </small>
        </div>

        <div class="form-group password-group">
          <label>Confirm Password</label>
          <input
            [type]="showConfirm ? 'text' : 'password'"
            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
            formControlName="confirmPassword"
          />
          <button type="button" class="toggle-password" (click)="showConfirm = !showConfirm">
            {{ showConfirm ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>

        <button class="btn primary" type="submit" [disabled]="resetForm.invalid || isLoading">
          {{ isLoading ? 'Resetting...' : 'Reset Password' }}
        </button>

      </form>

    </ng-container>

  </div>
</div>


