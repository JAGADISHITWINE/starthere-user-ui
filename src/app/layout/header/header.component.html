<!-- header.component.html -->

<header class="app-header">
  <div class="header-content">

    <!-- ── Logo Section ─────────────────────────────────────────────── -->
    <div class="header-left">
      <img class="logo" src="../../../assets/assets/logo.png" alt="Logo" routerLink="/" />

      <a class="gw-logo logo-dark" href="#">
        <div class="gw-words">
          <div class="gw-top">
            <span class="gw-go">go</span>
            <span class="gw-wild">WILD</span>
          </div>
          <span class="gw-sub">Karunadu</span>
        </div>
      </a>
    </div>

    <!-- ── Right Section ─────────────────────────────────────────────── -->
    <div class="header-right">

      <!-- Logged Out → Login button -->
      <button class="login-btn" *ngIf="!isLoggedIn" (click)="openLoginPanel()">
        <i class="bi bi-person-fill"></i>
        <span>Login</span>
      </button>

      <!-- Logged In → User Menu -->
      <div class="user-menu" *ngIf="isLoggedIn">
        <button class="user-avatar-btn" [class.show]="isUserDropdownOpen" (click)="toggleUserDropdown()"
          aria-haspopup="true" [attr.aria-expanded]="isUserDropdownOpen">
          <div class="user-avatar" *ngIf="!profilePicture">{{ getUserInitials() }}</div>
          <img *ngIf="profilePicture" [src]="profilePicture" alt="Profile" class="user-avatar-img" />
          <span class="user-name">{{ userName }}</span>
          <i class="bi bi-chevron-down"></i>
        </button>

        <!-- Dropdown -->
        <div class="user-dropdown" [class.show]="isUserDropdownOpen" (clickOutside)="closeUserDropdown()">
          <!-- Dropdown Header -->
          <div class="dropdown-header">
            <div class="user-avatar-large" *ngIf="!profilePicture">{{ getUserInitials() }}</div>
            <img *ngIf="profilePicture" [src]="profilePicture" alt="Profile" class="user-avatar-img-large" />
            <div class="user-info">
              <div class="user-name-large">{{ userName }}</div>
              <div class="user-email">{{ userEmail }}</div>
            </div>
          </div>

          <div class="dropdown-divider"></div>

          <a class="dropdown-item" (click)="navigateTo('/my-bookings')">
            <i class="bi bi-calendar-check"></i>
            My Bookings
          </a>

          <div class="dropdown-divider"></div>

          <a class="dropdown-item text-danger" (click)="logout()">
            <i class="bi bi-box-arrow-right"></i>
            Logout
          </a>
        </div>
      </div>

    </div>
  </div>

  <!-- ── Mobile Nav ────────────────────────────────────────────────────── -->
  <div class="mobile-overlay" [class.show]="isMobileMenuOpen" (click)="closeMobileMenu()"></div>

  <nav class="mobile-nav" [class.show]="isMobileMenuOpen">
    <div class="mobile-nav-content">

      <!-- Logged-in user section -->
      <div class="mobile-user-section" *ngIf="isLoggedIn">
        <div class="mobile-user-avatar" *ngIf="!profilePicture">{{ getUserInitials() }}</div>
        <img *ngIf="profilePicture" [src]="profilePicture" alt="Profile" class="mobile-user-avatar-img" />
        <div class="mobile-user-info">
          <div class="mobile-user-name">{{ userName }}</div>
          <div class="mobile-user-email">{{ userEmail }}</div>
        </div>
      </div>

      <!-- Nav links -->
      <div class="mobile-nav-links">
        <a class="mobile-nav-link" routerLink="/my-bookings" *ngIf="isLoggedIn" (click)="closeMobileMenu()">
          <i class="bi bi-calendar-check"></i> My Bookings
        </a>
      </div>

      <!-- Logged-in actions -->
      <div class="mobile-user-actions" *ngIf="isLoggedIn">
        <a class="mobile-nav-link text-danger" (click)="logout(); closeMobileMenu()">
          <i class="bi bi-box-arrow-right"></i> Logout
        </a>
      </div>

      <!-- Logged-out login -->
      <div class="mobile-login-section" *ngIf="!isLoggedIn">
        <button class="mobile-login-btn" (click)="openLoginPanel(); closeMobileMenu()">
          <i class="bi bi-person-fill"></i>
          Login to Your Account
        </button>
      </div>

    </div>
  </nav>

</header>